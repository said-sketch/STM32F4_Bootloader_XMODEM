/*
 * xmodem.h
 *
 *  Created on: Feb 9, 2026
 *      Author: HP
 */

#ifndef _XMODEM_H_
#define _XMODEM_H_

/* ================= XMODEM CONSTANTS ================= */
#define SOH     0x01    /* 128-byte packet */
#define STX     0x02    /* 1024-byte packet */
#define EOT     0x04
#define ACK     0x06
#define NAK     0x15
#define CAN     0x18
#define CRC_REQ 'C'

#define XMODEM_PACKET_128   128U
#define XMODEM_PACKET_1K    1024U

/* ================= STATUS ================= */
typedef enum
{
    XMODEM_OK = 0,
    XMODEM_EOT_RECEIVED,
    XMODEM_CRC_ERROR,
    XMODEM_PACKET_NUM_ERROR,
    XMODEM_TIMEOUT_ERROR,
    XMODEM_UART_ERROR
} XMODEM_Status_t;

/* ================= API ================= */
XMODEM_Status_t XMODEM_Receive(uint32_t flash_start_addr);
uint16_t XMODEM_CalcCRC16(const uint8_t *data, uint16_t length);



#endif /* _XMODEM_H_ */
